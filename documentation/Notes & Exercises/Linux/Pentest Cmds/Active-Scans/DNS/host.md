## host

#### DNS Record Types

- NS - Nameserver records contain the name of the authoritative servers hosting the DNS records for a domain.
- A - Also known as a host record, the “a record” contains the IP address of a hostname (such as www.megacorpone.com).
- MX - Mail Exchange records contain the names of the servers responsible for handling email for the domain. A domain can contain multiple MX records.
- PTR - Pointer Records are used in reverse lookup zones and are used to find the records associated with an IP address.
- CNAME - Canonical Name Records are used to create aliases for other host records.
- TXT - Text records can contain any arbitrary data and can be used for various purposes, such as domain ownership verification.  

### Host Lookup

Returns the IP of a fully-qualified domain-name or IP (for reverse look-up)

```bash
host -t a FQDN
-t a # Looks for an A record by default, but can specify other types
```

##### Brute Force host look-ups

Automatically run through a list and lookup common hostnames for a domain

```bash
# Given a list of common hostnames (web, www, fs, etc) hosts.txt (included in Kali)
for host in $(cat /usr/share/fierce/hosts.txt); do host $host.megacorpone.com; done

# Not domain
for host in $(cat /usr/share/fierce/hosts.txt); do host $host; done
```

Wordlists can be installed to `/usr/share/seclists` with:

```bash
sudo apt install seclists
```

##### Reverse Lookup Brute Force

Once an IP range is discovered, utilize PTR records to scan through a range of IP's and discover hostnames for them.

```bash
# Use seq to append a range of IP's to a partial address & lookup PTR records for those.  Grep out non-existent hosts
for IP in $(seq 50 100); do host 38.100.193.$IP; done | grep -v "not found"

# TO specify a server to lookup against, supply as second argument to host
for IP in $(seq 50 100); do host 10.11.1.$IP 10.11.1.220; done | grep -v "not found"
```

It's a good idea to check out results and see if you can expand on them.  For example, if you find a "mail2.domain.com", do a host lookup for mail1 or mail3 and see if a new IP range is discovered.

### DNS Zone Transfers

A zone transfer is basically database replication between related DNS servers & involves copying a zone file from a master DNS server to a slave server.  This file contains a list of all the DNS names configured for that zone.  These should be only be allowed to authorized slave DNS servers, but misconfigurations open them up to anyone asking for one.

It's possible to get a total layout of a network through Zone transfers alone.

```bash
# Request a zone transfer
host -l DOMAIN DNS_ADDRESS
```

`zonetransfer.com` is owned by DigiNinja and allows for testing of zone transfers.